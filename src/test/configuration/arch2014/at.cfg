(define-system AT
  	(simulink "src/test/simulink/automatic_transmission.slx")
  	(parameters)
  	(inputs  throttle brake)
  	(outputs speed RPM gear)
  	(piecewise-constant throttle 0 100)
  	(piecewise-constant brake    0 325)
  	)

(select-system AT)
(set-log "results/arch2014/at.csv")
(set-report "results/arch2014/at-summary.csv")
(set-seed 0)

(set-repeat 50)

(define g1 (== gear 1))
(define g2 (== gear 2))
(define g3 (== gear 3))
(define g4 (== gear 4))

  
(set-solver random 4 100)
(falsify
  (always (0  8) (< RPM  4750))
  (always (0 30) (< RPM  4800))
  (always (0 20) (< speed 120))
  (always (0 30) (< speed 135))
  (always (0 50) (< speed 150))
  (always  (0 30) (implies (and g2 (next g1))
                           (next (always (0 2.5) (not g2)))))
  )

(set-solver adaptive (2 2 3 3 3 4) 0.25 100)
(falsify
  (always (0  8) (< RPM  4750))
  (always (0 30) (< RPM  4800))
  (always (0 20) (< speed 120))
  (always (0 30) (< speed 135))
  (always (0 50) (< speed 150))
  (always  (0 30) (implies (and g2 (next g1))
                           (next (always (0 2.5) (not g2)))))
  )
  
(set-solver breach 4 cmaes 100)
(falsify
  (always (0  8) (< RPM  4750))
  (always (0 30) (< RPM  4800))
  (always (0 20) (< speed 120))
  (always (0 30) (< speed 135))
  (always (0 50) (< speed 150))
  (always  (0 30) (implies (and g2 (next g1))
                           (next (always (0 2.5) (not g2)))))
  )


