(simulate
  1 true
  (0 (500 100)))

; Note: Greenspun's tenth rule does not apply yet.
;       This is a plain macro system.

(define
  S1 (always (0 30) (< speed 120)))

(set-system AutomaticTransmission)

; (set-solver adaptive (2 2 3 3 3 4) 0.25 300)

; (set-solver breach 4 cmaes 300)
(set-solver breach 4 global_nelder_mead 30)

(define
  S5 
    (or (always ( 0 29) (< speed 100))
        (always (29 30) (> speed 65))))

(define
  S6 (always (0 30) (or (< RPM 4770) (always (0 1) (> RPM 600)))))
  
; (falsify S1)

(falsify
    ; (always (0 30) (or (< RPM 4770) (always (0 1) (> RPM 600))))
    ; (not (eventually (0 30) (and (> RPM 4770) (eventually (0 1) (< RPM 600)))))
    ; (always (0 30) (< speed 120))
    ; (always (0 30) (implies (== gear 3) (> speed 30)))
    ; (always (0 30) (implies (== gear 4) (> speed 40)))
    ; (not (always (10 30) (in speed 50 60)))
    ; (or (always (0 10) (< speed 80)) (eventually (0 30) (> RPM 4500)))
    ; (or (always (0 10) (< speed 50)) (eventually (0 30) (> RPM 2700)))
    )


(simulate
  30 S6
  (0 (0 0))
  (2.5 (0 325)))

(robustness
  30 S6
  (0 (0 4771 0))
  (1 (0  599 0)))

; after falsification or simulation
; (get-statistics)
; (get-traces)
; (get-robustness)